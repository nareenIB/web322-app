<div class="row">
    <div class="col-md-12">
        <h2>Shop</h2>
        <hr />
        <% if (post) { %>
            <article class="mb-4 p-3 border rounded shadow bg-white">
                <h3><%= post.title %></h3>
                <img src="<%= post.featureImage %>" alt="<%= post.title %>" class="img-fluid mb-3" />
                <p><%= post.body %></p>
                <p><strong>Category:</strong> 
                    <% let categoryObj = categories.find(c => Number(c.id) === Number(post.category)); %>
                    <%= categoryObj ? categoryObj.name : "Unknown" %>
                </p>
                <p><strong>Price:</strong> $<%= post.price %></p>
                <p><strong>Last Updated:</strong> <%= post.postDate %></p>
            </article>
        <% } else { %>
            <div class="col-md-12 text-center">
                <h2><%= message || "No items available" %></h2>
                <p>Please try another Post / Category</p>
            </div>
        <% } %>

        <% if (items.length > 0) { %>
            <h4>Items</h4>
            <ul class="list-group">
                <% items.forEach(item => { %>
                    <li class="list-group-item">
                        <a href="/shop/<%= item.id %>?category=<%= viewingCategory || '' %>">
                            <%= item.title %>
                        </a>
                    </li>
                <% }); %>
            </ul>
        <% } %>

        <% if (categories.length > 0) { %>
            <h4>Categories</h4>
            <ul class="list-group">
                <% categories.forEach(category => { %>
                    <li class="list-group-item">
                        <a href="/shop?category=<%= category.id %>">
                            <%= category.name %>
                        </a>
                    </li>
                <% }); %>
            </ul>
        <% } %>
    </div>
</div>
